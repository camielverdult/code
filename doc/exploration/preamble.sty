\usepackage{xspace}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{MnSymbol}
\usepackage{stmaryrd}
\usepackage[inline]{enumitem}
\setlist{itemsep=0pt}
\usepackage{graphicx}
\usepackage{subcaption}

\newcommand{\GROOVE}{GROOVE}

% Closure of a pseudo-state
\newcommand{\cls}[1]{\lceil{#1}\rceil}
%\newcommand{\cls}[1]{{#1}{\triangleright}}
% Prime of a pseudo-state
\newcommand{\prm}[1]{\lfloor{#1}\rfloor}
%\newcommand{\prm}[1]{{\triangleleft}\mskip-2mu{#1}}

\newcommand{\dom}{\mathop{\mathrm{dom}}}

\newcommand{\Inner}{\ensuremath{\mathit{inner}}\xspace}
\newcommand{\Init}{\ensuremath{\iota}\xspace}
\newcommand{\Outer}{\ensuremath{\mathit{outer}}\xspace}
\newcommand{\Prime}{\ensuremath{\mathit{prim}}\xspace}
\newcommand{\Complete}{\ensuremath{\mathit{cplt}}\xspace}
\newcommand{\Open}{\ensuremath{\mathit{open}}\xspace}
\newcommand{\Closed}{\ensuremath{\mathit{clsd}}\xspace}
% Absent
\newcommand{\Absent}{\ensuremath{\mathit{abst}}\xspace}
\newcommand{\Present}{\ensuremath{\mathit{prst}}\xspace}
% Steady
\newcommand{\Steady}{\ensuremath{\mathit{stdy}}\xspace}
\newcommand{\Transient}{\ensuremath{\mathit{trnt}}\xspace}
% Transience level
\newcommand{\TLevel}{\ensuremath{\tau}\xspace}
% Absence depth
\newcommand{\ALevel}{\ensuremath{\alpha}\xspace}
% Inner level
\newcommand{\OLevel}{\ensuremath{o}\xspace}
% Recipe mapping
\newcommand{\Recipe}{\ensuremath{\rho}\xspace}

% Partiality of a transition
\newcommand{\Partial}{\ensuremath{\mathit{part}}\xspace}
\newcommand{\Atomic}{\ensuremath{\mathit{atom}}\xspace}

% Reachable transient open states
\newcommand{\RTO}{\mathit{RTO}}
% Reachable partial transitions
\newcommand{\RP}{\mathit{RP}}
% Reachable steady states
\newcommand{\RS}{\mathit{RS}}


\newcommand{\cC}{\mathcal{C}}
\newcommand{\cP}{\mathcal{P}}
\newcommand{\cS}{\mathcal{S}}

\newcommand{\natN}{\mathbb{N}}

\newcommand{\setof}[1]{\{{#1}\}}
\newcommand{\gensetof}[2]{\setof{{#1}\mid{#2}}}
\newcommand{\tupof}[1]{\langle{#1}\rangle}
\newcommand{\iffdef}{:\Leftrightarrow}
% Partial function
\newcommand{\pto}{\hookrightarrow}
% Such that
\newcommand{\st}{.\,}

% Special arrows

\newcommand{\goestostep}{\mathrel{{\prec}\mskip-3mu{\cdot}}}
\newcommand{\ngoestostep}{\not\goeststep}
\newcommand{\goestoplus}{\prec}
\newcommand{\goesto}{\preccurlyeq}

\newcommand{\comesfromstep}{\mathrel{{\cdot}\mskip-3mu{\succ}}}
\newcommand{\ncomesfrom}{\not\comesfromstep}
\newcommand{\comesfromplus}{\succ}
\newcommand{\comesfrom}{\succcurlyeq}


\newcommand{\ra}{\rightarrow}
\newcommand{\up}{{\uparrow}}

% Typeset the label of an extensible arrow
\newcommand{\xlabel}[1]{\smash{\mathchoice
		{\raisebox{-1.5pt}{$\scriptstyle#1$}}
		{\raisebox{-1.5pt}{$\scriptstyle#1$}}
		{\raisebox{-1pt}{$\scriptstyle#1$}}
		{\raisebox{-1pt}{$\scriptscriptstyle#1$}}
}}
% Prepend a negation to an extensible arrow
\newcommand{\xarrownot}{\mathrel{\arrownot-}\mskip-7mu}

% single-arrow transition
\newcommand{\trans}[1]{\xrightarrow{\xlabel{#1}}}
% negative single-arrow transition
\newcommand{\ntrans}[1]{\mathrel{\xarrownot\trans{#1}}}

% mapsto-like transition
\newcommand{\step}[1]{\mapstochar\xrightarrow{\xlabel{#1}}}
% negated mapsto-like transition
\newcommand{\nstep}[1]{\mapstochar\joinrel\xarrownot\xrightarrow{\xlabel{#1}}}

% Transactional transition
\newcommand{\ttrans}[1]{\xrightarrow{\xlabel{#1}}\mathrel{\mkern-13mu}\rightarrow}
% Negated transactional transition
%\newcommand{\nttrans}{\arrownot\ttrans}

%%%% Recapture the mapstochar, which is set to undefined by MnSymbol
\usepackage{trimclip}

\makeatletter
\providecommand{\mapstochar}{\mathrel{\mathpalette\mapstochar@\relax}}
\newcommand{\mapstochar@}[2]{%
	\makebox[0pt][l]{%
		\clipbox{0 0 {0.8\width} 0}{$\m@th#1\mapsto$}%
	}%
}
\makeatother
